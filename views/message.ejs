<%- include('_header'); %>
<link rel="stylesheet" href="/stylesheets/index.css">
<script>document.querySelector("#bk-btn").href = "/";</script>

<div class="rcorners p-2 pl-3 ml-0" style="background-color: #6186db; width: 100%; height: 120px;">
    <p class="h1 mb-0 p-0">Conversations</p>
    <p class="h3 m-0 p-0 font-weight-bold"><i class="fa fa-comments"></i> <%= messages.length %></p>
</div>
<a href="/messages/new" role="button" class="btn btn-primary col-sm-12 col-md-6 rounded-pill mt-2 shadow" style="background-color: #3c57cf;">
    <i class="fa fa-pencil-square-o font-weight-bold"></i> New message
</a>
<section class="mt-3">
    <ul class="list-group list-group-hover list-group-striped">
        <% for (const message of messages) { %>
            <!-- flex-column align-items-start -->
            <a href="/messages/<%= message.type %>/<%= message.target_id %>" class="list-group-item list-group-item-action p-2">
                <!-- justify-content-between -->
                <div class="d-flex w-100">     
                    <%
                        var img = message.type == 0 ? "students.png" : "class.png";
                    %>               
                    <img class="ml-0 rounded-circle bg-secondary" src="/images/<%= img %>" style="width:60px; height: 60px;">
                    <h5 class="mb-1 col-sm-3" style="font-size: 16px; font-weight: bold;">
                        <%= message.name %><br/>
                        <span class="badge badge-secondary badge-pill"><%= message.cnt %></span>
                    </h5>
                    <small class="ml-auto p-0 col-sm-3 text-right"><%= message.at %></small>
                </div>
            </a>
        <% } %>
    </ul>
</section>

<%- include("_footer"); %> 